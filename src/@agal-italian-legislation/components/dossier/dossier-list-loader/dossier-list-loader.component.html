<div [ngSwitch]="view">
    <p *ngSwitchCase="'CARD'">
        CARD
    </p>
    <p *ngSwitchDefault>
        <!-- <dossier-list-table-prime [ds]="ds"></dossier-list-table-prime> -->
        <p-table 
            styleClass="p-datatable-lg"
            [value]="ds" [loading]="loading"
            [lazy]="true" (onLazyLoad)="lazyLoad($event)"
            
            [resizableColumns]="true"
            [(selection)]="selectedElements" >

            <ng-template pTemplate="header">
                <tr>
					<th style="width:50px" ></th>
                    <th style="width:auto" pResizableColumn pSortableColumn="dossier.description">description</th>
                    <th style="width:auto" pResizableColumn pSortableColumn="dossier.dossierCode">dossierCode</th>


					<th style="width:auto" pResizableColumn pSortableColumn="procurement.description">description</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurement.code">code</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurement.ref">ref</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurement.contractorEopooCode">contractorEopooCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurement.sectorCode">sectorCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurement.procedureCode">procedureCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurement.modalityCode">modalityCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurement.statusCode">statusCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.cig">cig</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.description">description</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.offerExpiryDate">offerExpiryDate</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.baseAmount">baseAmount</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.candidacy">candidacy</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.securityAmount">securityAmount</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.istatCode">istatCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.nutsCode">nutsCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.cpvCode">cpvCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.typeCode">typeCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.awardCriterionCode">awardCriterionCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.statusCode">statusCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="procurementLot.workLocationCode">workLocationCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="partecipation.proposerEopooCode">proposerEopooCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="partecipation.partecipationTypeCode">partecipationTypeCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="partecipation.siteInspection">siteInspection</th>
					<th style="width:auto" pResizableColumn pSortableColumn="partecipation.offering">offering</th>
					<th style="width:auto" pResizableColumn pSortableColumn="partecipation.note">note</th>
					<th style="width:auto" pResizableColumn pSortableColumn="partecipation.creationDateTime">creationDateTime</th>
					<th style="width:auto" pResizableColumn pSortableColumn="preparation.companyPreparatorEopooCode">companyPreparatorEopooCode</th>
					<th style="width:auto" pResizableColumn pSortableColumn="preparation.note">note</th>

            		<th style="width:auto" pResizableColumn pSortableColumn="">buttons</th>    

                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-e>
                <tr>
                    <td><p-tableCheckbox [value]="e"></p-tableCheckbox></td>
					<td>{{ e.description }}</td>
					<td>{{ e.dossierCode }}</td>

					<td>{{ e.procurement.description }}</td>
					<td>{{ e.procurement.code }}</td>
					<td>{{ e.procurement.ref }}</td>
					<td>{{ e.procurement.contractorEopooCode }}</td>
					<td>{{ e.procurement.sectorCode }}</td>
					<td>{{ e.procurement.procedureCode }}</td>
					<td>{{ e.procurement.modalityCode }}</td>
					<td>{{ e.procurement.statusCode }}</td>
					<td>{{ e.procurementLot.cig }}</td>
					<td>{{ e.procurementLot.description }}</td>
					<td>{{ e.procurementLot.offerExpiryDate }}</td>
					<td>{{ e.procurementLot.baseAmount }}</td>
					<td>{{ e.procurementLot.candidacy }}</td>
					<td>{{ e.procurementLot.securityAmount }}</td>
					<td>{{ e.procurementLot.istatCode }}</td>
					<td>{{ e.procurementLot.nutsCode }}</td>
					<td>{{ e.procurementLot.cpvCode }}</td>
					<td>{{ e.procurementLot.typeCode }}</td>
					<td>{{ e.procurementLot.awardCriterionCode }}</td>
					<td>{{ e.procurementLot.statusCode }}</td>
					<td>{{ e.procurementLot.workLocationCode }}</td>
					<td>{{ e.partecipation.proposerEopooCode }}</td>
					<td>{{ e.partecipation.partecipationTypeCode }}</td>
					<td>{{ e.partecipation.siteInspection }}</td>
					<td>{{ e.partecipation.offering }}</td>
					<td>{{ e.partecipation.note }}</td>
					<td>{{ e.partecipation.creationDateTime }}</td>
					<td>{{ e.preparation.companyPreparatorEopooCode }}</td>
					<td>{{ e.preparation.note }}</td>
            <td *ngIf="buttons">
                <button *ngFor="let button of buttons" (click)="button.fn(e)" >{{button.name}}</button>
            </td>
                </tr>
            </ng-template>
        </p-table>
    </p>
</div>

<agal-paginator 
    [totalRecords]="totalRecords"
    [pageSizeOptions]="[30,50,100,500]"
    [initialSize]="30"
    (paginator)="changePagination($event)"
    ></agal-paginator>